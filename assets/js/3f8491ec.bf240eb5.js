(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2393],{6785:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var n=t(2784),a=t(6277),i={figure:"figure_1c7w",figure__caption:"figure__caption_1W0d",figure__title:"figure__title_1FLy",reference:"reference_3WyD","ref--rnrh-prop":"ref--rnrh-prop_1gRw","ref--api-def":"ref--api-def_17BB",ref:"ref_2cMA","ref--library":"ref--library_3AF9","ref--doc":"ref--doc_1-d7"},l=t(1510);function o(e){var r=e.url,t=e.type,o=e.member,d=e.name,s=e.full,p="doc"!==t,c=(o&&s?d+"."+o:o||d)+(e.plural?"s":"");return n.createElement(n.Fragment,null,n.createElement(l.Z,{target:"_blank",className:(0,a.Z)(i.ref,i["ref--"+t]),to:r},p?n.createElement("code",null,c):c)," ")}},1510:function(e,r,t){"use strict";t.d(r,{Z:function(){return p}});var n=t(8283),a=t(2784),i=t(7933),l=t(1344),o=t(1263),d=(0,a.createContext)({collectLink:function(){}}),s=t(77);var p=function(e){var r,t,p,c=e.isNavLink,m=e.to,u=e.href,h=e.activeClassName,f=e.isActive,v=e["data-noBrokenLinkCheck"],y=e.autoAddBaseUrl,k=void 0===y||y,g=(0,n.Z)(e,["isNavLink","to","href","activeClassName","isActive","data-noBrokenLinkCheck","autoAddBaseUrl"]),T=(0,s.C)().withBaseUrl,b=(0,a.useContext)(d),R=m||u,w=(0,l.Z)(R),N=null==R?void 0:R.replace("pathname://",""),x=void 0!==N?(t=N,k&&function(e){return e.startsWith("/")}(t)?T(t):t):void 0,C=(0,a.useRef)(!1),Z=c?i.OL:i.rU,M=o.Z.canUseIntersectionObserver;(0,a.useEffect)((function(){return!M&&w&&null!=x&&window.docusaurus.prefetch(x),function(){M&&p&&p.disconnect()}}),[x,M,w]);var L=null!==(r=null==x?void 0:x.startsWith("#"))&&void 0!==r&&r,_=!x||!w||L;return x&&w&&!L&&!v&&b.collectLink(x),_?a.createElement("a",Object.assign({href:x},R&&!w&&{target:"_blank",rel:"noopener noreferrer"},g)):a.createElement(Z,Object.assign({},g,{onMouseEnter:function(){C.current||null==x||(window.docusaurus.preload(x),C.current=!0)},innerRef:function(e){var r,t;M&&e&&w&&(r=e,t=function(){null!=x&&window.docusaurus.prefetch(x)},(p=new window.IntersectionObserver((function(e){e.forEach((function(e){r===e.target&&(e.isIntersecting||e.intersectionRatio>0)&&(p.unobserve(r),p.disconnect(),t())}))}))).observe(r))},to:x||""},c&&{isActive:f,activeClassName:h}))}},1344:function(e,r,t){"use strict";function n(e){return!0===/^(\w*:|\/\/)/.test(e)}function a(e){return void 0!==e&&!n(e)}t.d(r,{b:function(){return n},Z:function(){return a}})},77:function(e,r,t){"use strict";t.d(r,{C:function(){return i},Z:function(){return l}});var n=t(7614),a=t(1344);function i(){var e=(0,n.default)().siteConfig,r=(e=void 0===e?{}:e).baseUrl,t=void 0===r?"/":r,i=e.url;return{withBaseUrl:function(e,r){return function(e,r,t,n){var i=void 0===n?{}:n,l=i.forcePrependBaseUrl,o=void 0!==l&&l,d=i.absolute,s=void 0!==d&&d;if(!t)return t;if(t.startsWith("#"))return t;if((0,a.b)(t))return t;if(o)return r+t;var p=t.startsWith(r)?t:r+t.replace(/^\//,"");return s?e+p:p}(i,t,e,r)}}}function l(e,r){return void 0===r&&(r={}),(0,i().withBaseUrl)(e,r)}},8790:function(e,r,t){"use strict";t.r(r),t.d(r,{frontMatter:function(){return o},metadata:function(){return d},toc:function(){return s},default:function(){return c}});var n=t(7560),a=t(8283),i=(t(2784),t(9037)),l=t(6785),o={id:"rendering",title:"Rendering",sidebar_position:4,description:"An overview of the rendering step in react-native-render-html."},d={unversionedId:"flow/rendering",id:"flow/rendering",isDocsHomePage:!1,title:"Rendering",description:"An overview of the rendering step in react-native-render-html.",source:"@site/docs/flow/rendering.mdx",sourceDirName:"flow",slug:"/flow/rendering",permalink:"/react-native-render-html/docs/flow/rendering",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/flow/rendering.mdx",version:"current",sidebarPosition:4,frontMatter:{id:"rendering",title:"Rendering",sidebar_position:4,description:"An overview of the rendering step in react-native-render-html."},sidebar:"docSidebar",previous:{title:"CSS Processing",permalink:"/react-native-render-html/docs/flow/css-processing"}},s=[{value:"Three-layers Rendering Architecture",id:"three-layers-rendering-architecture",children:[]},{value:"Default TNode Renderers",id:"default-tnode-renderers",children:[]},{value:"Custom Renderers",id:"custom-renderers",children:[]},{value:"Internal Renderers",id:"internal-renderers",children:[]}],p={toc:s};function c(e){var r=e.components,t=(0,a.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,n.Z)({},p,t,{components:r,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"How ","\u200b",(0,i.kt)("abbr",{about:"Structured data matching closely the React tree to render.",title:"Transient Render Tree"},"TRT")," is rendered?"),(0,i.kt)("h2",{id:"three-layers-rendering-architecture"},"Three-layers Rendering Architecture"),(0,i.kt)("p",null,"When you consume the ",(0,i.kt)("inlineCode",{parentName:"p"},"RenderHTML")," component, you are actually using three distinct components. So this (",(0,i.kt)("strong",{parentName:"p"},"implicit 3 layers"),"):"),(0,i.kt)("div",{className:""},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"<RenderHTML source={{ html }} />\n"))),(0,i.kt)("p",null,"is equivalent to this (",(0,i.kt)("strong",{parentName:"p"},"explicit 3 layers"),"):"),(0,i.kt)("div",{className:""},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"<TRenderEngineProvider>\n  <RenderHTMLConfigProvider>\n    <RenderHTMLSource source={{ html }} />\n  </RenderHTMLConfigProvider>\n</TRenderEngineProvider>\n"))),(0,i.kt)("p",null,"You can actually use the ",(0,i.kt)("strong",{parentName:"p"},"explicit")," three-layer architecture by importing those components:"),(0,i.kt)("div",{className:""},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import {\n  TRenderEngineProvider,\n  RenderHTMLConfigProvider,\n  RenderHTMLSource\n} from 'react-native-render-html';\n"))),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The great benefit of using ",(0,i.kt)("strong",{parentName:"p"},"explicitly")," this three-layers rendering architecture is that the engine and configuration can be put near the top of your App to factor the cost of instantiating the engine. This is ",(0,i.kt)("strong",{parentName:"p"},"especially usefull")," for apps which will render hundreds to thousands of small snippets such as chat apps.\n"))),(0,i.kt)("p",null,"A few remarks:"),(0,i.kt)("ol",{style:{listStyleType:"decimal"}},(0,i.kt)("li",null,(0,i.kt)("p",null,"\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"TRenderEngineProvider",url:"/react-native-render-html/api/trenderengineprovider",member:void 0,full:!1,type:"api-def",plural:void 0,mdxType:"Reference"})," accepts all ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"RenderHTML",url:"/react-native-render-html/api/renderhtml",member:void 0,full:!1,type:"api-def",plural:void 0,mdxType:"Reference"})," component props pertaining to the ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"Transient Render Engine",url:"/react-native-render-html/docs/flow/transient-render-engine",type:"doc",full:!1,mdxType:"Reference"})," layer such as ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"customHTMLElementModels",url:"/react-native-render-html/api/renderhtmlprops#customhtmlelementmodels",member:"customHTMLElementModels",full:!1,type:"rnrh-prop",plural:void 0,mdxType:"Reference"}),", ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"classesStyles",url:"/react-native-render-html/api/renderhtmlprops#classesstyles",member:"classesStyles",full:!1,type:"rnrh-prop",plural:void 0,mdxType:"Reference"})," (all styling props) and DOM related such as ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"domVisitors",url:"/react-native-render-html/api/renderhtmlprops#domvisitors",member:"domVisitors",full:!1,type:"rnrh-prop",plural:void 0,mdxType:"Reference"}),", ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"selectDomRoot",url:"/react-native-render-html/api/renderhtmlprops#selectdomroot",member:"selectDomRoot",full:!1,type:"rnrh-prop",plural:void 0,mdxType:"Reference"}),"...")),(0,i.kt)("li",null,(0,i.kt)("p",null,"\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"RenderHTMLConfigProvider",url:"/react-native-render-html/api/renderhtmlconfigprovider",member:void 0,full:!1,type:"api-def",plural:void 0,mdxType:"Reference"})," accepts all ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"RenderHTML",url:"/react-native-render-html/api/renderhtml",member:void 0,full:!1,type:"api-def",plural:void 0,mdxType:"Reference"})," component props pertaining to the ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"Rendering",url:"/react-native-render-html/docs/flow/rendering",type:"doc",full:!1,mdxType:"Reference"})," layer such as ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"renderers",url:"/react-native-render-html/api/renderhtmlprops#renderers",member:"renderers",full:!1,type:"rnrh-prop",plural:void 0,mdxType:"Reference"}),", ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"renderersProps",url:"/react-native-render-html/api/renderhtmlprops#renderersprops",member:"renderersProps",full:!1,type:"rnrh-prop",plural:void 0,mdxType:"Reference"}),", ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"computeEmbeddedMaxWidth",url:"/react-native-render-html/api/renderhtmlprops#computeembeddedmaxwidth",member:"computeEmbeddedMaxWidth",full:!1,type:"rnrh-prop",plural:void 0,mdxType:"Reference"}),", ...")),(0,i.kt)("li",null,(0,i.kt)("p",null,"\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"RenderHTMLSource",url:"/react-native-render-html/api/renderhtmlsource",member:void 0,full:!1,type:"api-def",plural:void 0,mdxType:"Reference"})," accepts all ",(0,i.kt)("inlineCode",{parentName:"p"},"RenderHTML")," component props pertaining to the document such as ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"source",url:"/react-native-render-html/api/renderhtmlprops#source",member:"source",full:!1,type:"rnrh-prop",plural:void 0,mdxType:"Reference"}),", ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"onTTreeChange",url:"/react-native-render-html/api/renderhtmlprops#onttreechange",member:"onTTreeChange",full:!1,type:"rnrh-prop",plural:void 0,mdxType:"Reference"}),", ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"contentWidth",url:"/react-native-render-html/api/renderhtmlprops#contentwidth",member:"contentWidth",full:!1,type:"rnrh-prop",plural:void 0,mdxType:"Reference"}),"..."))),(0,i.kt)("h2",{id:"default-tnode-renderers"},"Default TNode Renderers"),(0,i.kt)("p",null,"Each node of the ","\u200b",(0,i.kt)("abbr",{about:"Structured data matching closely the React tree to render.",title:"Transient Render Tree"},"TRT")," is translated to a React component in the ",(0,i.kt)("inlineCode",{parentName:"p"},"TNodeRenderer")," component. Internally, ",(0,i.kt)("inlineCode",{parentName:"p"},"TNodeRenderer")," will map each type of ",(0,i.kt)("inlineCode",{parentName:"p"},"TNode")," to its dedicated component. ",(0,i.kt)("inlineCode",{parentName:"p"},"TDocumentRenderer")," for ",(0,i.kt)("inlineCode",{parentName:"p"},"TDocument")," nodes, ",(0,i.kt)("inlineCode",{parentName:"p"},"TBlockRenderer")," for ","\u200b",(0,i.kt)(l.Z,{library:"@native-html/transient-render-engine",name:"TBlock",url:"/react-native-render-html/api/tblock",member:void 0,full:!1,type:"api-def",plural:void 0,mdxType:"Reference"})," nodes, ",(0,i.kt)("inlineCode",{parentName:"p"},"TPhrasingRenderer")," for ","\u200b",(0,i.kt)(l.Z,{library:"@native-html/transient-render-engine",name:"TPhrasing",url:"/react-native-render-html/api/tphrasing",member:void 0,full:!1,type:"api-def",plural:void 0,mdxType:"Reference"})," nodes and ",(0,i.kt)("inlineCode",{parentName:"p"},"TTextRenderer")," for ","\u200b",(0,i.kt)(l.Z,{library:"@native-html/transient-render-engine",name:"TText",url:"/react-native-render-html/api/ttext",member:void 0,full:!1,type:"api-def",plural:void 0,mdxType:"Reference"})," nodes."),(0,i.kt)("p",null,"Under the hood, ",(0,i.kt)("inlineCode",{parentName:"p"},"TPhrasingRenderer")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"TTextRenderer")," use React Native ","\u200b",(0,i.kt)(l.Z,{full:!1,name:"Text",url:"https://reactnative.dev/docs/Text",type:"rn-symbol",mdxType:"Reference"})," wrapper component, while ",(0,i.kt)("inlineCode",{parentName:"p"},"TBlockRenderer")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"TDocumentRenderer")," use React Native ","\u200b",(0,i.kt)(l.Z,{full:!1,name:"View",url:"https://reactnative.dev/docs/View",type:"rn-symbol",mdxType:"Reference"})," wrapper component."),(0,i.kt)("p",null,"Each renderer will pass styles provided by its underlying ",(0,i.kt)("inlineCode",{parentName:"p"},"TNode")," to its React Native wrapper. Children are rendered thanks to the ",(0,i.kt)("inlineCode",{parentName:"p"},"TChildrenRenderer")," component."),(0,i.kt)("h2",{id:"custom-renderers"},"Custom Renderers"),(0,i.kt)("p",null,"Custom renderers are components defined for specific tags. They can be specified with the ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"renderers",url:"/react-native-render-html/api/renderhtmlprops#renderers",member:"renderers",full:!1,type:"rnrh-prop",plural:void 0,mdxType:"Reference"})," prop, which is a mapping of tags with the corresponding components. See the ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"Custom Rendering",url:"/react-native-render-html/docs/guides/custom-renderers",type:"doc",full:!1,mdxType:"Reference"})," page. Also note that props targeting those renderers can be passed to a custom renderer via the ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"renderersProps",url:"/react-native-render-html/api/renderhtmlprops#renderersprops",member:"renderersProps",full:!1,type:"rnrh-prop",plural:void 0,mdxType:"Reference"})," prop, which is a mapping of tag names with its corresponding props. Those props can be consumed from the custom renderer via ",(0,i.kt)("inlineCode",{parentName:"p"},"useRendererProps")," hook."),(0,i.kt)("h2",{id:"internal-renderers"},"Internal Renderers"),(0,i.kt)("p",null,"Some tags such as ","\u200b",(0,i.kt)(l.Z,{full:!1,name:"<img>",url:"https://mdn.io/img",type:"html-el",mdxType:"Reference"}),", ","\u200b",(0,i.kt)(l.Z,{full:!1,name:"<ol>",url:"https://mdn.io/ol",type:"html-el",mdxType:"Reference"}),", ","\u200b",(0,i.kt)(l.Z,{full:!1,name:"<ul>",url:"https://mdn.io/ul",type:"html-el",mdxType:"Reference"})," and ","\u200b",(0,i.kt)(l.Z,{full:!1,name:"<a>",url:"https://mdn.io/a",type:"html-el",mdxType:"Reference"})," are handled by special renderers, namely ",(0,i.kt)("strong",{parentName:"p"},"internal renderers"),". Those renderers can be thought of as ",'"',"internal custom renderers",'"',". See the ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"Images",url:"/react-native-render-html/docs/content/images",type:"doc",full:!1,mdxType:"Reference"}),", ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"Lists",url:"/react-native-render-html/docs/content/lists",type:"doc",full:!1,mdxType:"Reference"})," and ","\u200b",(0,i.kt)(l.Z,{library:"react-native-render-html",name:"Anchors",url:"/react-native-render-html/docs/content/anchors",type:"doc",full:!1,mdxType:"Reference"})," corresponding pages."))}c.isMDXComponent=!0}}]);